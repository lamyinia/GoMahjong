# 立直麻将（リーチ麻雀）完整规则手册

## 目录

1. [游戏概述](#一游戏概述)
2. [基本规则](#二基本规则)
3. [牌的种类](#三牌的种类)
4. [游戏流程](#四游戏流程)
5. [和牌条件](#五和牌条件)
6. [役种详解](#六役种详解)
7. [符数计算](#七符数计算)
8. [计分系统](#八计分系统)
9. [立直规则](#九立直规则)
10. [振听规则](#十振听规则)
11. [宝牌规则](#十一宝牌规则)
12. [鸣牌规则](#十二鸣牌规则)
13. [流局规则](#十三流局规则)
14. [庄家规则](#十四庄家规则)
15. [特殊规则](#十五特殊规则)
16. [开发实现要点](#十六开发实现要点)

---

## 一、游戏概述

### 1.1 什么是立直麻将

立直麻将（リーチ麻雀）是日本麻将的标准规则，也被称为"竞技麻将"。它是四人游戏，使用136张牌（不含花牌），通过做牌、和牌来获得分数。

### 1.2 游戏目标

- **和牌**：完成特定的牌型组合
- **得分**：通过和牌获得点数
- **排名**：游戏结束时按最终点数排名

### 1.3 游戏时长

- **半庄战**：东风场4局 + 南风场4局 = 8局（标准）
- **东风战**：仅东风场4局（快速模式）
- **一局时间**：通常15-30分钟

---

## 二、基本规则

### 2.1 参与人数

- **标准**：4人
- **变体**：3人（三麻）

### 2.2 初始点数

- **标准**：每人25000点
- **总计**：100000点（不变）

### 2.3 游戏结束条件

1. **正常结束**：完成所有局数（南4局结束）
2. **击飞结束**：有玩家点数≤0
3. **流局结束**：特殊流局（如四风连打、四杠散了等）

### 2.4 最终排名

按最终点数排序：
- **1位**：最高分
- **2位**：次高分
- **3位**：第三名
- **4位**：最低分

---

## 三、牌的种类

### 3.1 牌的总数

**136张牌**（不含花牌）

### 3.2 数牌（数牌）

#### 万子（マンズ）
- 1万～9万，每种4张，共36张

#### 筒子（ピンズ）
- 1筒～9筒，每种4张，共36张

#### 索子（ソーズ）
- 1索～9索，每种4张，共36张

### 3.3 字牌（字牌）

#### 风牌（風牌）
- 东、南、西、北，每种4张，共16张

#### 三元牌（三元牌）
- 白、发、中，每种4张，共12张

### 3.4 特殊牌

#### 赤宝牌（赤ドラ）
- 部分规则使用：5万、5筒、5索各1张为赤牌
- 赤牌本身是宝牌，且不影响牌型

---

## 四、游戏流程

### 4.1 开局准备

1. **确定起家**：通过掷骰子或随机确定
2. **洗牌**：将所有牌洗匀
3. **码牌**：每人码17墩（34张）
4. **开牌**：翻开王牌最上方的牌作为宝牌指示牌

### 4.2 发牌

- **庄家**：14张（多1张）
- **闲家**：13张

### 4.3 游戏回合

#### 基本流程

```
1. 摸牌（庄家先摸）
   ↓
2. 判断可操作项
   - 自摸和
   - 暗杠/加杠
   - 立直
   ↓
3. 打牌
   ↓
4. 其他玩家响应
   - 荣和（最高优先级）
   - 杠（大明杠）
   - 碰
   - 吃（只能吃上家）
   ↓
5. 轮到下家
```

### 4.4 操作优先级

从高到低：
1. **和牌**（荣和）
2. **杠**（大明杠、加杠、暗杠）
3. **碰**
4. **吃**

---

## 五、和牌条件

### 5.1 基本和牌型

和牌必须满足以下条件：

1. **4组面子 + 1个雀头**
   - 面子：顺子、刻子或杠子
   - 雀头：对子

2. **至少1个役**
   - 必须有至少1番的役种
   - 无役不能和牌

3. **非振听状态**
   - 不能处于振听状态

### 5.2 特殊和牌型

#### 七对子（チートイ）
- 7个不同的对子
- 固定2番25符

#### 国士无双（コクシムソウ）
- 13种幺九牌各1张 + 其中任意1张
- 役满

#### 九莲宝灯（チュウレンポウトウ）
- 同一种花色的1112345678999 + 任意一张同花色
- 役满

### 5.3 和牌方式

#### 自摸（ツモ）
- 从牌山摸到的牌和牌
- 所有玩家支付

#### 荣和（ロン）
- 其他玩家打出的牌和牌
- 放铳者支付

---

## 六、役种详解

### 6.1 役种分类

#### 按番数分类

| 番数 | 名称 | 说明 |
|------|------|------|
| 1番 | 基本役 | 立直、一发、门前清自摸和、平和、断幺九、役牌等 |
| 2番 | 小役 | 三色同顺、三色同刻、三暗刻、三杠子、对对和、七对子等 |
| 3番 | 中役 | 混一色、纯全带幺九、二杯口等 |
| 6番 | 跳满 | 清一色等 |
| 13番+ | 役满 | 四暗刻、大三元、国士无双等 |

### 6.2 1番役种

#### 立直（リーチ）
- **条件**：门清、听牌、点数≥1000、非振听
- **操作**：支付1000点立直棒
- **效果**：+1番，且可能触发"一发"

#### 一发（イッパツ）
- **条件**：立直后1巡内和牌
- **注意**：立直后暗杠会失效

#### 门前清自摸和（メンゼンツモ）
- **条件**：门清状态下自摸和牌
- **注意**：必须门清

#### 平和（ピンフ）
- **条件**：4个顺子 + 非役牌雀头 + 两面听牌
- **符数**：自摸20符，荣和30符

#### 断幺九（タンヤオ）
- **条件**：手牌全部由数牌2-8组成
- **注意**：标准规则必须门清（无食断）

#### 役牌（ヤクハイ）
- **条件**：场风、自风、三元牌的刻子/杠子
- **计算**：每个刻子1番，可叠加

### 6.3 2番役种

#### 三色同顺（サンショクドウジュン）
- **条件**：相同顺子在三种花色中都出现
- **注意**：鸣牌后-1番

#### 三色同刻（サンショクドウコウ）
- **条件**：相同刻子在三种花色中都出现

#### 三暗刻（サンアンコウ）
- **条件**：手牌中有3个暗刻

#### 三杠子（サンカンツ）
- **条件**：手牌中有3个杠子

#### 对对和（トイトイ）
- **条件**：4个刻子（杠子）+ 1个对子

#### 七对子（チートイ）
- **条件**：7个不同的对子
- **符数**：固定25符

### 6.4 3番役种

#### 混一色（ホンイツ）
- **条件**：一种花色 + 字牌
- **注意**：鸣牌后-1番

#### 纯全带幺九（ジュンチャンタイヤオチュウ）
- **条件**：所有面子都包含数牌幺九（1、9）
- **注意**：鸣牌后-1番

#### 二杯口（リャンペイコウ）
- **条件**：手牌中有两个不同的一杯口
- **注意**：必须门清

### 6.5 6番役种

#### 清一色（チンイツ）
- **条件**：同一种花色（无字牌）
- **注意**：鸣牌后-1番

### 6.6 役满役种

#### 四暗刻（スーアンコウ）
- **条件**：手牌中有四个暗刻
- **注意**：单骑听牌为双倍役满

#### 大三元（ダイサンゲン）
- **条件**：白、发、中三个刻子/杠子

#### 小四喜（ショウスーシー）
- **条件**：风牌中三个刻子/杠子 + 一个对子

#### 大四喜（ダイスーシー）
- **条件**：东、南、西、北四个刻子/杠子
- **注意**：双倍役满

#### 国士无双（コクシムソウ）
- **条件**：13种幺九牌各1张 + 其中任意1张
- **注意**：十三面听牌为双倍役满

#### 九莲宝灯（チュウレンポウトウ）
- **条件**：同一种花色的1112345678999 + 任意一张同花色
- **注意**：纯正九莲宝灯（听所有9种牌）为双倍役满

#### 累计役满（カゾエヤクマン）
- **条件**：手牌的番数累计达到或超过13番

### 6.7 役种叠加规则

- **可叠加**：多个役种可以同时成立
- **不可叠加**：某些役种互斥（如七对子和对对和）
- **复合计算**：所有役种番数相加

---

## 七、符数计算

### 7.1 符数组成

符数由以下部分组成：

```
总符数 = 底符 + 面子符 + 雀头符 + 听牌符 + 门清荣和符 + 自摸符
```

### 7.2 底符

- **所有和牌都有**：20符

### 7.3 面子符

#### 刻子符

| 类型 | 明刻 | 暗刻 |
|------|------|------|
| 中张（2-8） | 2符 | 4符 |
| 幺九（1、9、字） | 4符 | 8符 |

#### 杠子符

| 类型 | 明杠 | 暗杠 |
|------|------|------|
| 中张（2-8） | 8符 | 16符 |
| 幺九（1、9、字） | 16符 | 32符 |

### 7.4 雀头符

- **役牌对子**：场风、自风、三元牌 = 2符
- **其他对子**：0符

### 7.5 听牌符

- **边张听**：听1或9 = 2符
- **坎张听**：听中间牌（如2-4听3）= 2符
- **单骑听**：听对子 = 2符
- **两面听**：0符

### 7.6 门清荣和符

- **门清荣和**：+10符

### 7.7 自摸符

- **自摸**：+2符
- **注意**：庄家自摸不加自摸符

### 7.8 特殊符数

#### 平和
- **自摸**：固定20符
- **荣和**：固定30符

#### 七对子
- **固定**：25符

#### 国士无双
- **不计符**：直接役满

### 7.9 符数取整

- **向上取整到10的倍数**
- 例如：32符 → 40符，37符 → 40符

---

## 八、计分系统

### 8.1 基本点计算

#### 公式

```
基本点 = 符 × 2^(番+2)
```

#### 上限

- **基本点 ≥ 2000**：固定为2000（满贯阈值）

#### 满贯以上

| 条件 | 名称 | 基本点 | 荣和点数 |
|------|------|--------|----------|
| 5番 | 满贯 | 2000 | 8000 |
| 6-7番 | 跳满 | 3000 | 12000 |
| 8-10番 | 倍满 | 4000 | 16000 |
| 11-12番 | 三倍满 | 6000 | 24000 |
| 13番+ | 役满 | 8000 | 32000 |

### 8.2 支付系数

| 和牌方式 | 支付者 | 系数 |
|----------|--------|------|
| 闲家荣和 | 放铳者 | ×4 |
| 庄家荣和 | 放铳者 | ×6 |
| 闲家自摸 | 庄家 | ×2 |
| 闲家自摸 | 其他闲家 | ×1 |
| 庄家自摸 | 所有闲家 | ×2 |

### 8.3 取整规则

1. **基本点取整**：向上取整到100的倍数
2. **支付额取整**：向上取整到100的倍数（通常已满足）

### 8.4 额外得分

#### 本场棒
- **每1本场**：+300点
- **累积**：庄家连庄时累积

#### 立直棒
- **每1本**：+1000点
- **来源**：立直时支付的1000点

### 8.5 详细计分流程

参考：[支付分数.md](./支付分数.md)

---

## 九、立直规则

### 9.1 立直条件

1. **门清状态**：无吃、碰、明杠
2. **听牌状态**：已听牌
3. **点数足够**：当前点数 ≥ 1000
4. **非振听**：不能处于振听状态
5. **非最后巡**：不是最后一张牌

### 9.2 立直操作

1. **支付1000点**：放置立直棒
2. **打出一张牌**：必须打出一张牌
3. **进入立直状态**：之后只能暗杠（有限制）

### 9.3 立直后限制

- **不能吃、碰、明杠**
- **可以暗杠**：但听牌不能改变，且"一发"失效
- **不能改变打牌习惯**：必须按固定顺序打牌

### 9.4 一发

- **条件**：立直后1巡内和牌
- **失效条件**：
  - 立直后暗杠
  - 其他玩家鸣牌
  - 超过1巡

### 9.5 立直棒归属

- **下次和牌者获得**：所有立直棒
- **流局时**：立直棒保留到下一局

---

## 十、振听规则

### 10.1 振听定义

振听是指**不能荣和**的状态，但可以自摸。

### 10.2 振听类型

#### 舍牌振听（すてふり）
- **条件**：听牌中包含自己打过的牌
- **解除**：改变听牌或自摸和牌

#### 同巡振听（どうじゅんふり）
- **条件**：本巡内可以荣和但选择不荣和
- **解除**：下一巡或自摸和牌

#### 立直后振听（リーチごふり）
- **条件**：立直后可以荣和但选择不荣和
- **解除**：自摸和牌

### 10.3 振听影响

- **不能荣和**：只能自摸
- **可以自摸**：自摸不受振听影响

---

## 十一、宝牌规则

### 11.1 宝牌指示牌（ドラ表示牌）

- **位置**：王牌最上方
- **翻开时机**：开局时翻开
- **数量**：通常1张，流局时可能增加

### 11.2 宝牌计算

#### 表宝牌（表ドラ）
- **计算**：指示牌的下一个数字/字
- **示例**：指示牌3万 → 宝牌4万
- **特殊**：
  - 9 → 1（循环）
  - 北 → 白（三元牌循环）

#### 里宝牌（裏ドラ）
- **条件**：立直和牌时
- **位置**：表宝牌指示牌下方的牌
- **计算**：同样规则

#### 赤宝牌（赤ドラ）
- **条件**：使用赤牌规则时
- **计算**：每张赤牌 = 1番

### 11.3 宝牌特性

- **不算役**：宝牌本身不是役
- **可叠加**：与其他役种叠加
- **无役和牌**：仅宝牌不能和牌

---

## 十二、鸣牌规则

### 12.1 吃（チー）

#### 条件
- **只能吃上家**：上家打出的牌
- **组成顺子**：必须能组成顺子
- **门清限制**：吃后失去门清

#### 食替限制
- **不能打出**：与吃进牌同筋（相差3）的牌
- **参考**：[食替.md](./食替.md)

### 12.2 碰（ポン）

#### 条件
- **任何玩家**：可以碰任何玩家打出的牌
- **组成刻子**：必须能组成刻子
- **门清限制**：碰后失去门清

### 12.3 杠（カン）

#### 类型

##### 明杠（ミンカン）
- **大明杠**：用其他玩家打出的牌组成杠子
- **加杠**：在明刻基础上加杠

##### 暗杠（アンカン）
- **条件**：手牌中有4张相同牌
- **注意**：暗杠不影响门清

#### 杠后处理
- **补牌**：从王牌补1张牌
- **翻宝牌**：翻开新的宝牌指示牌

### 12.4 鸣牌优先级

参考：[一炮多响.md](./一炮多响.md)

---

## 十三、流局规则

### 13.1 流局类型

#### 荒牌流局（流し）
- **条件**：牌山摸完无人和牌
- **处理**：按听牌状态结算

#### 九种九牌（九種九牌）
- **条件**：第一巡摸牌后，手牌有9种以上幺九牌
- **处理**：可选择流局

#### 四风连打（四風連打）
- **条件**：第一巡四人打出相同风牌
- **处理**：流局

#### 四杠散了（四カン散らし）
- **条件**：四人各开一杠
- **处理**：流局

#### 三家和（三家和）
- **条件**：三人同时荣和
- **处理**：流局（部分规则）

### 13.2 流局结算

#### 听牌罚符
- **不听者支付听牌者**
- **标准**：不听者支付1000点
- **庄家**：庄家不听支付1500点

#### 连庄判定
- **庄家听牌**：继续坐庄，本场+1
- **庄家不听**：下庄

---

## 十四、庄家规则

### 14.1 庄家特权

1. **得分更高**：和牌得分×1.5
2. **连庄权利**：和牌或流局听牌可连庄
3. **起家优势**：多摸1张牌

### 14.2 庄家责任

1. **支付更多**：支付闲家时×1.5
2. **被追加倍**：放铳时惩罚更重

### 14.3 轮庄规则

- **正常轮庄**：按东→南→西→北顺序
- **连庄**：庄家和牌或流局听牌时

详细参考：[庄家.md](./庄家.md)

---

## 十五、特殊规则

### 15.1 食断

- **定义**：是否允许鸣牌后成立断幺九
- **标准规则**：不允许（必须门清）
- **参考**：[食断.md](./食断.md)

### 15.2 食替

- **定义**：吃牌时不能打出与吃进牌同筋的牌
- **标准规则**：禁止
- **参考**：[食替.md](./食替.md)

### 15.3 连庄限制

- **标准规则**：无限制
- **参考**：[连庄.md](./连庄.md)

### 15.4 一炮多响

- **定义**：一张牌被多人荣和
- **标准规则**：允许
- **参考**：[一炮多响.md](./一炮多响.md)

---

## 十六、开发实现要点

### 16.1 核心数据结构

```go
type GameState struct {
    Players        [4]*Player
    DealerIndex    int
    RoundWind      Wind
    RoundNumber    int
    Honba          int
    RiichiSticks   int
    Wall           *Wall
    DoraIndicators []Tile
}

type Player struct {
    Hand           []Tile
    Melds          []Meld
    Discards       []Tile
    Points         int
    IsRiichi       bool
    IsTenpai       bool
    IsFuriten      bool
}
```

### 16.2 关键算法

#### 和牌判定
- **枚举雀头**：遍历所有可能的对子
- **递归回溯**：寻找4组面子
- **役种检查**：验证是否有役

#### 听牌判定
- **枚举打牌**：尝试打出每张牌
- **和牌检查**：检查是否能和牌
- **听牌型分析**：计算听牌类型和有效牌

#### 符数计算
- **逐步累加**：底符、面子符、雀头符等
- **向上取整**：到10的倍数

#### 番数计算
- **役种识别**：检查所有可能的役种
- **叠加计算**：累加所有成立的役种

### 16.3 服务端验证

所有操作必须在服务端验证：
- **和牌判定**：服务端计算
- **鸣牌判定**：服务端验证
- **立直判定**：服务端检查条件
- **计分计算**：服务端计算

### 16.4 客户端显示

客户端只负责：
- **显示选项**：显示服务端下发的可操作项
- **收集输入**：收集玩家选择
- **展示结果**：显示服务端计算结果

### 16.5 冲突处理

参考：[一炮多响.md](./一炮多响.md)

---

## 附录：快速参考表

### A. 点数速查表

| 番\符 | 20符 | 30符 | 40符 | 50符 |
|-------|------|------|------|------|
| 1番   | 700  | 1000 | 1300 | 1600 |
| 2番   | 1300 | 2000 | 2600 | 3200 |
| 3番   | 2600 | 3900 | 5200 | 6400 |
| 4番   | 5200 | 7700 | 8000 | 8000 |

### B. 役种速查表

| 役种 | 番数 | 门清要求 |
|------|------|----------|
| 立直 | 1 | 是 |
| 断幺九 | 1 | 是（标准） |
| 平和 | 1 | 是 |
| 三色同顺 | 2 | 否（-1番） |
| 混一色 | 3 | 否（-1番） |
| 清一色 | 6 | 否（-1番） |

### C. 符数速查表

| 类型 | 符数 |
|------|------|
| 底符 | 20 |
| 中张明刻 | 2 |
| 中张暗刻 | 4 |
| 幺九明刻 | 4 |
| 幺九暗刻 | 8 |
| 中张明杠 | 8 |
| 中张暗杠 | 16 |
| 幺九明杠 | 16 |
| 幺九暗杠 | 32 |
| 役牌雀头 | 2 |
| 边张/坎张/单骑听 | 2 |
| 门清荣和 | 10 |
| 自摸 | 2 |

---

## 参考资料

### 核心规则
- [支付分数.md](./支付分数.md) - 详细计分流程
- [番符.md](./番符.md) - 番数和符数详解
- [无除法运算.md](./无除法运算.md) - 计分数学原理
- [取整问题.md](./取整问题.md) - 取整规则详解

### 特殊规则
- [立直规则详解.md](./立直规则详解.md) - 立直规则详解
- [振听规则详解.md](./振听规则详解.md) - 振听规则详解
- [宝牌规则详解.md](./宝牌规则详解.md) - 宝牌规则详解
- [流局规则详解.md](./流局规则详解.md) - 流局规则详解
- [役种完整列表.md](./役种完整列表.md) - 所有役种列表

### 游戏机制
- [庄家.md](./庄家.md) - 庄家规则详解
- [连庄.md](./连庄.md) - 连庄机制
- [一炮多响.md](./一炮多响.md) - 冲突处理

### 规则变体
- [食替.md](./食替.md) - 食替规则
- [食断.md](./食断.md) - 食断规则

### 策略理论
- [筋牌.md](./筋牌.md) - 防守理论

### 评分系统
- [段位分增减.md](./段位分增减.md) - 段位系统
- [trueskill算法.md](./trueskill算法.md) - TrueSkill算法

---

**版本**：v1.0  
**最后更新**：2026年  
**适用规则**：日本立直麻将标准规则（天凤/雀魂规则）

